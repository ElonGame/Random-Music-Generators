// From browser
var MidiWriter = require('MidiWriter');


var tracks = [];
tracks[0] = new MidiWriter.Track();

// You can chain track methods.
tracks[0]
	.setTempo(120)
    .setTimeSignature(3, 4)
	.addEvent([
		// addEvent() accepts an array of event objects like this...
		new MidiWriter.ProgramChangeEvent({instrument : 1}),
		new MidiWriter.NoteEvent({wait: 'd2', pitch: ['B4'], duration: '8'}),
        new MidiWriter.NoteEvent({pitch: ['B4'], duration: '8', repeat: 5}),
		new MidiWriter.NoteEvent({wait: 'd2', pitch: ['A4'], duration: '8'}),
        new MidiWriter.NoteEvent({pitch: ['A4'], duration: '8', repeat: 5}),
                ], function(index, event) {
			return {velocity: 100};
		}
	);

var write = new MidiWriter.Writer(tracks);
console.log(write.dataUri());
